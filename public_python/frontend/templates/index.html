<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProMovieGroup</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/bootstrap.min.css') }}">

    <!-- MDB CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/hero/css/mdb.min.css') }}">

    <!-- Owl Carousel -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/owl.theme.default.min.css') }}">

    <!-- AOS (Animate On Scroll) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/aos.css') }}">

    <!-- Fancybox -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/jquery.fancybox.min.css') }}">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/css/style.css') }}">

    <!-- Icon Fonts -->
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/fonts/icomoon/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/fonts/feather/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/service-website-template/fonts/flaticon/font/flaticon.css') }}">

    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed&display=swap');
        
        /* Loader Styles */
        #loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        #loader {
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            -webkit-animation: spin 2s linear infinite;
            animation: spin 2s linear infinite;
        }

        #loader-percentage {
            margin-top: 20px;
            font-size: 24px;
            font-family: 'Montserrat', sans-serif;
        }

        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div id="loader-percentage">0%</div>
    </div>

    <link rel="stylesheet" href="{{ url_for('static', filename='efekty/adds/index/main.css') }}">

    <header class="fixed-top">
        <div id="navbarContainer"></div>
    </header>
    
    <div class="tlo_strony mt-3 mt-lg-5">
        {% if active_menu == 'o-nas' %}
            {% include 'page/hero.html' %}
        {% elif active_menu == 'oferta' %}
            {% include 'page/oferta.html' %}
        {% elif active_menu == 'galeria' %}
            {% include 'page/galeria.html' %}
        {% elif active_menu == 'opinie' %}
            {% include 'page/opinie.html' %}
        {% elif active_menu == 'kontakt' %}
            {% include 'page/logo.html' %}
        {% elif active_menu == 'faq' %}
            {% include 'page/faq.html' %}
        {% elif active_menu == 'articles' %}
            {% include 'page/articles.html' %}
        {% elif active_menu == 'wsparcie' %}
            {% include 'page/wsparcie.html' %}
        {% else %}
            {% include 'page/hero.html' %}
        {% endif %}
    </div>

    <div id="footer-section"></div>

    <!-- jQuery -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery-3.5.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery-migrate-3.0.0.min.js') }}"></script>

    <!-- Bootstrap (jQuery should be loaded before Bootstrap) -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/bootstrap.min.js') }}"></script>

    <!-- MDB (depends on Bootstrap) -->
    <script src="{{ url_for('static', filename='efekty/adds/hero/js/mdb.min.js') }}"></script>

    <!-- Owl Carousel -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/owl.carousel.min.js') }}"></script>

    <!-- AOS (Animate On Scroll) -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/aos.js') }}"></script>

    <!-- Additional plugins -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/imagesloaded.pkgd.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/isotope.pkgd.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery.animateNumber.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery.stellar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery.waypoints.min.js') }}"></script>
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/jquery.fancybox.min.js') }}"></script>

    <!-- Custom Scripts -->
    <script src="{{ url_for('static', filename='efekty/adds/service-website-template/js/custom.js') }}"></script>

    <!-- Bootstrap CDN (can be replaced with local version if necessary) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='efekty/adds/index/footerSection.js') }}"></script>

    <!-- Loader Script -->
    <script>
document.addEventListener("DOMContentLoaded", function () {
    let loaderPercentage = document.getElementById('loader-percentage');
    let loaderWrapper = document.getElementById('loader-wrapper');

    let images = document.images;
    let videos = document.querySelectorAll('video[src$=".mp4"]'); // Znajduje wszystkie elementy video z plikami mp4

    let totalMedia = images.length + videos.length;
    let mediaLoaded = 0;

    // Użycie Promises do obsługi ładowania obrazów i filmów
    let mediaPromises = [];

    for (let i = 0; i < images.length; i++) {
        mediaPromises.push(loadImage(images[i].src));
    }

    for (let i = 0; i < videos.length; i++) {
        mediaPromises.push(loadVideo(videos[i]));
    }

    Promise.all(mediaPromises)
        .then(() => {

            setTimeout(() => {

                loaderWrapper.style.transition = 'opacity 0s ease'; 
                loaderWrapper.style.opacity = 0;

                setTimeout(() => {
                    loaderWrapper.style.display = 'none';
                }, 0); 
            }, 2000);
        })
        .catch(error => {
            console.error('Błąd ładowania mediów:', error);
        });

    // Funkcja do ładowania pojedynczego obrazu
    function loadImage(src) {
        return new Promise((resolve, reject) => {
            let img = new Image();
            img.src = src;
            img.onload = () => {
                mediaLoaded++;
                updateLoaderPercentage();
                resolve();
            };
            img.onerror = () => {
                mediaLoaded++;
                updateLoaderPercentage();
                reject(`Nie udało się załadować obrazu: ${src}`);
            };
        });
    }

    // Funkcja do ładowania pojedynczego wideo
    function loadVideo(video) {
        return new Promise((resolve, reject) => {
            video.onloadeddata = () => {
                mediaLoaded++;
                updateLoaderPercentage();
                resolve();
            };
            video.onerror = () => {
                mediaLoaded++;
                updateLoaderPercentage();
                reject(`Nie udało się załadować wideo: ${video.src}`);
            };
        });
    }

    // Aktualizacja wyświetlanego procentu załadowanych mediów (obrazy + wideo)
    function updateLoaderPercentage() {
        let percentage = Math.floor((mediaLoaded / totalMedia) * 100);
        loaderPercentage.innerText = percentage + "%";
    }
});

    </script>
</body>
</html>
